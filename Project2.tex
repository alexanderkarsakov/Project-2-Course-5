\documentclass[]{article}
\usepackage{lmodern}
\usepackage{amssymb,amsmath}
\usepackage{ifxetex,ifluatex}
\usepackage{fixltx2e} % provides \textsubscript
\ifnum 0\ifxetex 1\fi\ifluatex 1\fi=0 % if pdftex
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
\else % if luatex or xelatex
  \ifxetex
    \usepackage{mathspec}
  \else
    \usepackage{fontspec}
  \fi
  \defaultfontfeatures{Ligatures=TeX,Scale=MatchLowercase}
\fi
% use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
% use microtype if available
\IfFileExists{microtype.sty}{%
\usepackage{microtype}
\UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\usepackage[margin=1in]{geometry}
\usepackage{hyperref}
\hypersetup{unicode=true,
            pdftitle={Project2},
            pdfauthor={Alex},
            pdfborder={0 0 0},
            breaklinks=true}
\urlstyle{same}  % don't use monospace font for urls
\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.77,0.63,0.00}{#1}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{#1}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}
\usepackage{graphicx,grffile}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
\IfFileExists{parskip.sty}{%
\usepackage{parskip}
}{% else
\setlength{\parindent}{0pt}
\setlength{\parskip}{6pt plus 2pt minus 1pt}
}
\setlength{\emergencystretch}{3em}  % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{0}
% Redefines (sub)paragraphs to behave more like sections
\ifx\paragraph\undefined\else
\let\oldparagraph\paragraph
\renewcommand{\paragraph}[1]{\oldparagraph{#1}\mbox{}}
\fi
\ifx\subparagraph\undefined\else
\let\oldsubparagraph\subparagraph
\renewcommand{\subparagraph}[1]{\oldsubparagraph{#1}\mbox{}}
\fi

%%% Use protect on footnotes to avoid problems with footnotes in titles
\let\rmarkdownfootnote\footnote%
\def\footnote{\protect\rmarkdownfootnote}

%%% Change title format to be more compact
\usepackage{titling}

% Create subtitle command for use in maketitle
\newcommand{\subtitle}[1]{
  \posttitle{
    \begin{center}\large#1\end{center}
    }
}

\setlength{\droptitle}{-2em}

  \title{Project2}
    \pretitle{\vspace{\droptitle}\centering\huge}
  \posttitle{\par}
    \author{Alex}
    \preauthor{\centering\large\emph}
  \postauthor{\par}
      \predate{\centering\large\emph}
  \postdate{\par}
    \date{17 С„РµРІСЂР°Р»СЏ 2019 Рі}


\begin{document}
\maketitle

\subsection{Instructions}\label{instructions}

Storms and other severe weather events can cause both public health and
economic problems for communities and municipalities. Many severe events
can result in fatalities, injuries, and property damage, and preventing
such outcomes to the extent possible is a key concern.

This project involves exploring the U.S. National Oceanic and
Atmospheric Administration's (NOAA) storm database. This database tracks
characteristics of major storms and weather events in the United States,
including when and where they occur, as well as estimates of any
fatalities, injuries, and property damage.

\subsection{Assignment}\label{assignment}

The basic goal of this assignment is to explore the NOAA Storm Database
and answer some basic questions about severe weather events. You must
use the database to answer the questions below and show the code for
your entire analysis. Your analysis can consist of tables, figures, or
other summaries. You may use any R package you want to support your
analysis.

\subsection{Questions}\label{questions}

Your data analysis must address the following questions:

\begin{itemize}
\tightlist
\item
  Across the United States, which types of events (as indicated in the
  \color{red}{\verb|EVTYPE|}EVTYPE variable) are most harmful with
  respect to population health?
\item
  Across the United States, which types of events have the greatest
  economic consequences?
\end{itemize}

Consider writing your report as if it were to be read by a government or
municipal manager who might be responsible for preparing for severe
weather events and will need to prioritize resources for different types
of events. However, there is no need to make any specific
recommendations in your report.

\subsection{Data Analysis}\label{data-analysis}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{library}\NormalTok{(}\StringTok{"data.table"}\NormalTok{)}
\KeywordTok{library}\NormalTok{(}\StringTok{"ggplot2"}\NormalTok{)}
\NormalTok{fileUrl <-}\StringTok{ "https://d396qusza40orc.cloudfront.net/repdata%2Fdata%2FStormData.csv.bz2"}
\KeywordTok{download.file}\NormalTok{(fileUrl, }\DataTypeTok{destfile =} \KeywordTok{paste0}\NormalTok{(}\StringTok{"/Users/mgalarny/Desktop"}\NormalTok{, }\StringTok{'/repdata%2Fdata%2FStormData.csv.bz2'}\NormalTok{))}
\NormalTok{stormDF <-}\StringTok{ }\KeywordTok{read.csv}\NormalTok{(}\StringTok{"/Users/mgalarny/Desktop/repdata%2Fdata%2FStormData.csv.bz2"}\NormalTok{)}
\CommentTok{# Converting data.frame to data.table}
\NormalTok{stormDT <-}\StringTok{ }\KeywordTok{as.data.table}\NormalTok{(stormDF)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{colnames}\NormalTok{(stormDT)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] "STATE__"    "BGN_DATE"   "BGN_TIME"   "TIME_ZONE"  "COUNTY"    
##  [6] "COUNTYNAME" "STATE"      "EVTYPE"     "BGN_RANGE"  "BGN_AZI"   
## [11] "BGN_LOCATI" "END_DATE"   "END_TIME"   "COUNTY_END" "COUNTYENDN"
## [16] "END_RANGE"  "END_AZI"    "END_LOCATI" "LENGTH"     "WIDTH"     
## [21] "F"          "MAG"        "FATALITIES" "INJURIES"   "PROPDMG"   
## [26] "PROPDMGEXP" "CROPDMG"    "CROPDMGEXP" "WFO"        "STATEOFFIC"
## [31] "ZONENAMES"  "LATITUDE"   "LONGITUDE"  "LATITUDE_E" "LONGITUDE_"
## [36] "REMARKS"    "REFNUM"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# Finding columns to remove}
\NormalTok{cols2Remove <-}\StringTok{ }\KeywordTok{colnames}\NormalTok{(stormDT[, }\OperatorTok{!}\KeywordTok{c}\NormalTok{(}\StringTok{"EVTYPE"}\NormalTok{, }\StringTok{"FATALITIES"}\NormalTok{, }\StringTok{"INJURIES"}\NormalTok{, }\StringTok{"PROPDMG"}\NormalTok{, }\StringTok{"PROPDMGEXP"}\NormalTok{, }\StringTok{"CROPDMG"}\NormalTok{, }\StringTok{"CROPDMGEXP"}\NormalTok{)])}
\CommentTok{# Removing columns}
\NormalTok{stormDT[, }\KeywordTok{c}\NormalTok{(cols2Remove) }\OperatorTok{:}\ErrorTok{=}\StringTok{ }\OtherTok{NULL}\NormalTok{]}
\CommentTok{# Only use data where fatalities or injuries occurred.  }
\NormalTok{stormDT <-}\StringTok{ }\NormalTok{stormDT[(EVTYPE }\OperatorTok{!=}\StringTok{ "?"} \OperatorTok{&}\StringTok{ }
\StringTok{             }\NormalTok{(INJURIES }\OperatorTok{>}\StringTok{ }\DecValTok{0} \OperatorTok{|}\StringTok{ }\NormalTok{FATALITIES }\OperatorTok{>}\StringTok{ }\DecValTok{0} \OperatorTok{|}\StringTok{ }\NormalTok{PROPDMG }\OperatorTok{>}\StringTok{ }\DecValTok{0} \OperatorTok{|}\StringTok{ }\NormalTok{CROPDMG }\OperatorTok{>}\StringTok{ }\DecValTok{0}\NormalTok{)), }\KeywordTok{c}\NormalTok{(}\StringTok{"EVTYPE"}\NormalTok{, }\StringTok{"FATALITIES"}\NormalTok{, }\StringTok{"INJURIES"}\NormalTok{, }\StringTok{"PROPDMG"}\NormalTok{, }\StringTok{"PROPDMGEXP"}\NormalTok{, }\StringTok{"CROPDMG"}\NormalTok{, }\StringTok{"CROPDMGEXP"}\NormalTok{) ]}
\end{Highlighting}
\end{Shaded}

Making the PROPDMGEXP and CROPDMGEXP columns cleaner so they can be used
to calculate property and crop cost.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# Change all damage exponents to uppercase.}
\NormalTok{cols <-}\StringTok{ }\KeywordTok{c}\NormalTok{(}\StringTok{"PROPDMGEXP"}\NormalTok{, }\StringTok{"CROPDMGEXP"}\NormalTok{)}
\NormalTok{stormDT[,  (cols) }\OperatorTok{:}\ErrorTok{=}\StringTok{ }\KeywordTok{c}\NormalTok{(}\KeywordTok{lapply}\NormalTok{(.SD, toupper)), .SDcols =}\StringTok{ }\NormalTok{cols]}
\CommentTok{# Map property damage alphanumeric exponents to numeric values.}
\NormalTok{propDmgKey <-}\StringTok{  }\KeywordTok{c}\NormalTok{(}\StringTok{"}\CharTok{\textbackslash{}"\textbackslash{}"}\StringTok{"}\NormalTok{ =}\StringTok{ }\DecValTok{10}\OperatorTok{^}\DecValTok{0}\NormalTok{,}\StringTok{"-"}\NormalTok{ =}\StringTok{ }\DecValTok{10}\OperatorTok{^}\DecValTok{0}\NormalTok{, }\StringTok{"+"}\NormalTok{ =}\StringTok{ }\DecValTok{10}\OperatorTok{^}\DecValTok{0}\NormalTok{,}\StringTok{"0"}\NormalTok{ =}\StringTok{ }\DecValTok{10}\OperatorTok{^}\DecValTok{0}\NormalTok{,}\StringTok{"1"}\NormalTok{ =}\StringTok{ }\DecValTok{10}\OperatorTok{^}\DecValTok{1}\NormalTok{,}\StringTok{"2"}\NormalTok{ =}\StringTok{ }\DecValTok{10}\OperatorTok{^}\DecValTok{2}\NormalTok{,}\StringTok{"3"}\NormalTok{ =}\StringTok{ }\DecValTok{10}\OperatorTok{^}\DecValTok{3}\NormalTok{,}\StringTok{"4"}\NormalTok{ =}\StringTok{ }\DecValTok{10}\OperatorTok{^}\DecValTok{4}\NormalTok{,}\StringTok{"5"}\NormalTok{ =}\StringTok{ }\DecValTok{10}\OperatorTok{^}\DecValTok{5}\NormalTok{,}\StringTok{"6"}\NormalTok{ =}\StringTok{ }\DecValTok{10}\OperatorTok{^}\DecValTok{6}\NormalTok{,}\StringTok{"7"}\NormalTok{ =}\StringTok{ }\DecValTok{10}\OperatorTok{^}\DecValTok{7}\NormalTok{,}\StringTok{"8"}\NormalTok{ =}\StringTok{ }\DecValTok{10}\OperatorTok{^}\DecValTok{8}\NormalTok{,}\StringTok{"9"}\NormalTok{ =}\StringTok{ }\DecValTok{10}\OperatorTok{^}\DecValTok{9}\NormalTok{,}\StringTok{"H"}\NormalTok{ =}\StringTok{ }\DecValTok{10}\OperatorTok{^}\DecValTok{2}\NormalTok{,}\StringTok{"K"}\NormalTok{ =}\StringTok{ }\DecValTok{10}\OperatorTok{^}\DecValTok{3}\NormalTok{,}\StringTok{"M"}\NormalTok{ =}\StringTok{ }\DecValTok{10}\OperatorTok{^}\DecValTok{6}\NormalTok{,}\StringTok{"B"}\NormalTok{ =}\StringTok{ }\DecValTok{10}\OperatorTok{^}\DecValTok{9}\NormalTok{)}
\CommentTok{# Map crop damage alphanumeric exponents to numeric values}
\NormalTok{cropDmgKey <-}\StringTok{  }\KeywordTok{c}\NormalTok{(}\StringTok{"}\CharTok{\textbackslash{}"\textbackslash{}"}\StringTok{"}\NormalTok{ =}\StringTok{ }\DecValTok{10}\OperatorTok{^}\DecValTok{0}\NormalTok{,}\StringTok{"?"}\NormalTok{ =}\StringTok{ }\DecValTok{10}\OperatorTok{^}\DecValTok{0}\NormalTok{, }\StringTok{"0"}\NormalTok{ =}\StringTok{ }\DecValTok{10}\OperatorTok{^}\DecValTok{0}\NormalTok{,}\StringTok{"K"}\NormalTok{ =}\StringTok{ }\DecValTok{10}\OperatorTok{^}\DecValTok{3}\NormalTok{,}\StringTok{"M"}\NormalTok{ =}\StringTok{ }\DecValTok{10}\OperatorTok{^}\DecValTok{6}\NormalTok{,}\StringTok{"B"}\NormalTok{ =}\StringTok{ }\DecValTok{10}\OperatorTok{^}\DecValTok{9}\NormalTok{)}
\NormalTok{stormDT[, PROPDMGEXP }\OperatorTok{:}\ErrorTok{=}\StringTok{ }\NormalTok{propDmgKey[}\KeywordTok{as.character}\NormalTok{(stormDT[,PROPDMGEXP])]]}
\NormalTok{stormDT[}\KeywordTok{is.na}\NormalTok{(PROPDMGEXP), PROPDMGEXP }\OperatorTok{:}\ErrorTok{=}\StringTok{ }\DecValTok{10}\OperatorTok{^}\DecValTok{0}\NormalTok{ ]}
\NormalTok{stormDT[, CROPDMGEXP }\OperatorTok{:}\ErrorTok{=}\StringTok{ }\NormalTok{cropDmgKey[}\KeywordTok{as.character}\NormalTok{(stormDT[,CROPDMGEXP])] ]}
\NormalTok{stormDT[}\KeywordTok{is.na}\NormalTok{(CROPDMGEXP), CROPDMGEXP }\OperatorTok{:}\ErrorTok{=}\StringTok{ }\DecValTok{10}\OperatorTok{^}\DecValTok{0}\NormalTok{ ]}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{stormDT <-}\StringTok{ }\NormalTok{stormDT[, .(EVTYPE, FATALITIES, INJURIES, PROPDMG, PROPDMGEXP, }\DataTypeTok{propCost =}\NormalTok{ PROPDMG }\OperatorTok{*}\StringTok{ }\NormalTok{PROPDMGEXP, CROPDMG, CROPDMGEXP, }\DataTypeTok{cropCost =}\NormalTok{ CROPDMG }\OperatorTok{*}\StringTok{ }\NormalTok{CROPDMGEXP)]}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{totalCostDT <-}\StringTok{ }\NormalTok{stormDT[, .(}\DataTypeTok{propCost =} \KeywordTok{sum}\NormalTok{(propCost), }\DataTypeTok{cropCost =} \KeywordTok{sum}\NormalTok{(cropCost), }\DataTypeTok{Total_Cost =} \KeywordTok{sum}\NormalTok{(propCost) }\OperatorTok{+}\StringTok{ }\KeywordTok{sum}\NormalTok{(cropCost)), by =}\StringTok{ }\NormalTok{.(EVTYPE)]}
\NormalTok{totalCostDT <-}\StringTok{ }\NormalTok{totalCostDT[}\KeywordTok{order}\NormalTok{(}\OperatorTok{-}\NormalTok{Total_Cost), ]}
\NormalTok{totalCostDT <-}\StringTok{ }\NormalTok{totalCostDT[}\DecValTok{1}\OperatorTok{:}\DecValTok{10}\NormalTok{, ]}
\KeywordTok{head}\NormalTok{(totalCostDT, }\DecValTok{5}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##               EVTYPE     propCost   cropCost   Total_Cost
## 1:             FLOOD 144657709807 5661968450 150319678257
## 2: HURRICANE/TYPHOON  69305840000 2607872800  71913712800
## 3:           TORNADO  56947380676  414953270  57362333946
## 4:       STORM SURGE  43323536000       5000  43323541000
## 5:              HAIL  15735267513 3025954473  18761221986
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{totalInjuriesDT <-}\StringTok{ }\NormalTok{stormDT[, .(}\DataTypeTok{FATALITIES =} \KeywordTok{sum}\NormalTok{(FATALITIES), }\DataTypeTok{INJURIES =} \KeywordTok{sum}\NormalTok{(INJURIES), }\DataTypeTok{totals =} \KeywordTok{sum}\NormalTok{(FATALITIES) }\OperatorTok{+}\StringTok{ }\KeywordTok{sum}\NormalTok{(INJURIES)), by =}\StringTok{ }\NormalTok{.(EVTYPE)]}
\NormalTok{totalInjuriesDT <-}\StringTok{ }\NormalTok{totalInjuriesDT[}\KeywordTok{order}\NormalTok{(}\OperatorTok{-}\NormalTok{FATALITIES), ]}
\NormalTok{totalInjuriesDT <-}\StringTok{ }\NormalTok{totalInjuriesDT[}\DecValTok{1}\OperatorTok{:}\DecValTok{10}\NormalTok{, ]}
\KeywordTok{head}\NormalTok{(totalInjuriesDT, }\DecValTok{5}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##            EVTYPE FATALITIES INJURIES totals
## 1:        TORNADO       5633    91346  96979
## 2: EXCESSIVE HEAT       1903     6525   8428
## 3:    FLASH FLOOD        978     1777   2755
## 4:           HEAT        937     2100   3037
## 5:      LIGHTNING        816     5230   6046
\end{verbatim}

\subsection{Answers}\label{answers}

\subsubsection{Across the United States, which types of events are most
harmful with respect to population
health?}\label{across-the-united-states-which-types-of-events-are-most-harmful-with-respect-to-population-health}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{bad_stuff <-}\StringTok{ }\KeywordTok{melt}\NormalTok{(totalInjuriesDT, }\DataTypeTok{id.vars=}\StringTok{"EVTYPE"}\NormalTok{, }\DataTypeTok{variable.name =} \StringTok{"bad_thing"}\NormalTok{)}
\KeywordTok{head}\NormalTok{(bad_stuff, }\DecValTok{5}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##            EVTYPE  bad_thing value
## 1:        TORNADO FATALITIES  5633
## 2: EXCESSIVE HEAT FATALITIES  1903
## 3:    FLASH FLOOD FATALITIES   978
## 4:           HEAT FATALITIES   937
## 5:      LIGHTNING FATALITIES   816
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# Create chart}
\NormalTok{healthChart <-}\StringTok{ }\KeywordTok{ggplot}\NormalTok{(bad_stuff, }\KeywordTok{aes}\NormalTok{(}\DataTypeTok{x=}\KeywordTok{reorder}\NormalTok{(EVTYPE, }\OperatorTok{-}\NormalTok{value), }\DataTypeTok{y=}\NormalTok{value))}
\CommentTok{# Plot data as bar chart}
\NormalTok{healthChart =}\StringTok{ }\NormalTok{healthChart }\OperatorTok{+}\StringTok{ }\KeywordTok{geom_bar}\NormalTok{(}\DataTypeTok{stat=}\StringTok{"identity"}\NormalTok{, }\KeywordTok{aes}\NormalTok{(}\DataTypeTok{fill=}\NormalTok{bad_thing), }\DataTypeTok{position=}\StringTok{"dodge"}\NormalTok{)}
\CommentTok{# Format y-axis scale and set y-axis label}
\NormalTok{healthChart =}\StringTok{ }\NormalTok{healthChart }\OperatorTok{+}\StringTok{ }\KeywordTok{ylab}\NormalTok{(}\StringTok{"Frequency Count"}\NormalTok{) }
\CommentTok{# Set x-axis label}
\NormalTok{healthChart =}\StringTok{ }\NormalTok{healthChart }\OperatorTok{+}\StringTok{ }\KeywordTok{xlab}\NormalTok{(}\StringTok{"Event Type"}\NormalTok{) }
\CommentTok{# Rotate x-axis tick labels }
\NormalTok{healthChart =}\StringTok{ }\NormalTok{healthChart }\OperatorTok{+}\StringTok{ }\KeywordTok{theme}\NormalTok{(}\DataTypeTok{axis.text.x =} \KeywordTok{element_text}\NormalTok{(}\DataTypeTok{angle=}\DecValTok{45}\NormalTok{, }\DataTypeTok{hjust=}\DecValTok{1}\NormalTok{))}
\CommentTok{# Set chart title and center it}
\NormalTok{healthChart =}\StringTok{ }\NormalTok{healthChart }\OperatorTok{+}\StringTok{ }\KeywordTok{ggtitle}\NormalTok{(}\StringTok{"Top 10 US Killers"}\NormalTok{) }\OperatorTok{+}\StringTok{ }\KeywordTok{theme}\NormalTok{(}\DataTypeTok{plot.title =} \KeywordTok{element_text}\NormalTok{(}\DataTypeTok{hjust =} \FloatTok{0.5}\NormalTok{))}
\NormalTok{healthChart}
\end{Highlighting}
\end{Shaded}

\begin{figure}
\centering
\includegraphics{Project2/1.png}
\caption{}
\end{figure}

\subsubsection{Across the United States, which types of events have the
greatest economic
consequences?}\label{across-the-united-states-which-types-of-events-have-the-greatest-economic-consequences}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{econ_consequences <-}\StringTok{ }\KeywordTok{melt}\NormalTok{(totalCostDT, }\DataTypeTok{id.vars=}\StringTok{"EVTYPE"}\NormalTok{, }\DataTypeTok{variable.name =} \StringTok{"Damage_Type"}\NormalTok{)}
\KeywordTok{head}\NormalTok{(econ_consequences, }\DecValTok{5}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##               EVTYPE Damage_Type        value
## 1:             FLOOD    propCost 144657709807
## 2: HURRICANE/TYPHOON    propCost  69305840000
## 3:           TORNADO    propCost  56947380676
## 4:       STORM SURGE    propCost  43323536000
## 5:              HAIL    propCost  15735267513
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# Create chart}
\NormalTok{econChart <-}\StringTok{ }\KeywordTok{ggplot}\NormalTok{(econ_consequences, }\KeywordTok{aes}\NormalTok{(}\DataTypeTok{x=}\KeywordTok{reorder}\NormalTok{(EVTYPE, }\OperatorTok{-}\NormalTok{value), }\DataTypeTok{y=}\NormalTok{value))}
\CommentTok{# Plot data as bar chart}
\NormalTok{econChart =}\StringTok{ }\NormalTok{econChart }\OperatorTok{+}\StringTok{ }\KeywordTok{geom_bar}\NormalTok{(}\DataTypeTok{stat=}\StringTok{"identity"}\NormalTok{, }\KeywordTok{aes}\NormalTok{(}\DataTypeTok{fill=}\NormalTok{Damage_Type), }\DataTypeTok{position=}\StringTok{"dodge"}\NormalTok{)}
\CommentTok{# Format y-axis scale and set y-axis label}
\NormalTok{econChart =}\StringTok{ }\NormalTok{econChart }\OperatorTok{+}\StringTok{ }\KeywordTok{ylab}\NormalTok{(}\StringTok{"Cost (dollars)"}\NormalTok{) }
\CommentTok{# Set x-axis label}
\NormalTok{econChart =}\StringTok{ }\NormalTok{econChart }\OperatorTok{+}\StringTok{ }\KeywordTok{xlab}\NormalTok{(}\StringTok{"Event Type"}\NormalTok{) }
\CommentTok{# Rotate x-axis tick labels }
\NormalTok{econChart =}\StringTok{ }\NormalTok{econChart }\OperatorTok{+}\StringTok{ }\KeywordTok{theme}\NormalTok{(}\DataTypeTok{axis.text.x =} \KeywordTok{element_text}\NormalTok{(}\DataTypeTok{angle=}\DecValTok{45}\NormalTok{, }\DataTypeTok{hjust=}\DecValTok{1}\NormalTok{))}
\CommentTok{# Set chart title and center it}
\NormalTok{econChart =}\StringTok{ }\NormalTok{econChart }\OperatorTok{+}\StringTok{ }\KeywordTok{ggtitle}\NormalTok{(}\StringTok{"Top 10 US Storm Events causing Economic Consequences"}\NormalTok{) }\OperatorTok{+}\StringTok{ }\KeywordTok{theme}\NormalTok{(}\DataTypeTok{plot.title =} \KeywordTok{element_text}\NormalTok{(}\DataTypeTok{hjust =} \FloatTok{0.5}\NormalTok{))}
\NormalTok{econChart}
\end{Highlighting}
\end{Shaded}

\begin{figure}
\centering
\includegraphics{Project2/2.png}
\caption{}
\end{figure}


\end{document}
